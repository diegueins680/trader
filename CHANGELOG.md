# Changelog
All notable changes to this project will be documented in this file.

## Unreleased
- Live bot: support multi-symbol bots via `botSymbols` and `TRADER_BOT_SYMBOLS`, with per-symbol status snapshots.
- Live bot: auto-syncs to the latest top combo (poll interval `TRADER_BOT_COMBOS_POLL_SEC`) and applies it while running.
- API: add `/binance/trades` for full Binance account trade history (spot/margin require symbol; futures supports all).
- Web UI: add Binance account trades panel powered by `/binance/trades`.
- Web UI: live bot controls support multi-symbol start/stop and per-bot selection.
- Deploy: quick AWS deploy now validates an EFS mount and ensures `TRADER_STATE_DIR` lives on it.
- CLI/API: accept `long-only`/`long` as aliases for `--positioning long-flat`.
- Exchange data: add Kraken/Poloniex alongside Binance (`--platform`, `--symbol` alias) with trading only on Binance/Coinbase.
- Exchange data: add Coinbase platform support for exchange klines and spot trading.
- Trading: Coinbase spot orders now supported via `/trade` and `--binance-trade` (live-only; no test endpoint).
- Optimizer: add platform sampling (`--platforms`) and persist platform in top-combo outputs.
- Web UI: add platform selector with per-exchange symbols/intervals and disable Binance-only actions when not on Binance.
- Web UI: store and check API keys per platform (Binance/Coinbase) and show Coinbase symbol defaults.
- Web UI: optimizer combo rows are preview-only with explicit Apply actions plus refresh/apply-top shortcuts.
- Web UI: top combos now auto-apply when available to keep the form aligned with the top performer.
- Web UI: idle live bot auto-starts after the top combo is applied.
- API: futures MIN_NOTIONAL parsing now honors the `notional` field to skip trade tests below minNotional.
- Web UI: API panel adds base URL copy + /health open shortcuts; loading a profile clears manual override locks.
- Web UI: add quick-jump buttons in the config panel to navigate major sections.
- Web UI: Data Log adds an auto-scroll toggle to keep the latest entries visible.
- Web UI: Data Log adds label filtering with copy-shown support plus clear-filter/jump-to-latest actions.
- Web UI: numeric inputs accept comma decimals and strip thousands separators; auto-refresh interval input disables when off.
- Web UI: add a sticky run bar in the configuration panel showing readiness issues and keeping run actions visible.
- Web UI: add section headings plus issue shortcuts that jump and highlight the relevant inputs.
- Web UI: when trading is armed, automatically switches Market to Futures when Positioning is set to Long/Short.
- Web UI: falls back to `GET` for async polling when `POST` hits proxy errors (e.g. 502/503).
- Web UI: avoid optimizer combo apply crashes when compute limits are unavailable.
- Backtests: risk halts now record `MAX_DRAWDOWN`/`MAX_DAILY_LOSS` as trade exit reasons.
- Live bot: risk halts now record `MAX_DRAWDOWN`/`MAX_DAILY_LOSS` exit reasons even if a signal exit coincides.
- Kalman market context now honors small `--kalman-market-top-n` values when enough symbols are available.
- Tuning: sweep/optimization validates prediction lengths before scoring to avoid crashes.
- Trading/Tuning: add blend method, min-edge/cost-aware edge gating, max-hold exits, trend/volatility sizing filters, and stress-weighted tune scoring.
- Trading: max-hold exits now enforce a 1-bar cooldown before re-entry.
- Trading: add signal-to-noise entry filter plus volatility-multiple stop-loss/take-profit/trailing options.
- Normalization: `minmax`/`standard` fall back to no-op when the fit window is empty or only contains non-finite values; `log` requires finite, positive values.
- Web UI: improves async job not found handling with a clearer error after the grace period.
- Web UI: fixes a startup crash when optimizer combos apply before API compute limits are available.
- Web UI: show optimizer combo source (API vs static) and last update time.
- Web UI: optimizer combo loads preserve the current positioning unless the combo explicitly specifies one.
- Web UI: hides the Agree overlay for LSTM-only backtests and clarifies bars=0 combo behavior.
- Web UI: optimizer combo refresh errors keep the last known combos visible with a warning.
- API/Trading: latest signals include `closeDirection`, and live order decisions respect `closeThreshold` for exits.
- Web UI: manual Method/open/close edits are preserved when optimizer combos or optimize/sweep results apply.
- Web UI: optimizer combos now persist/show the operations that produced each top result on hover.
- Web UI: add auto-apply toggle with last-applied marker, manual override lock/unlock hints, and a cross-origin API base warning.
- Web UI: show persisted live-bot snapshots when `/bot/status` is restored after restart.
- Web UI: live bot start/status errors surface CloudFront `/api/*` proxy hints and avoid a stuck `Starting...` state when the API is down.
- Live bot: support long/short positioning on Binance futures (including adopting/closing existing short positions).
- Optimizer: adds a `--quality` preset plus CSV high/low auto-detection for deeper equity searches.
- Optimizer: adds trade-quality filters (win rate, profit factor, exposure) and samples min-hold/cooldown bars for churn control.
- Optimizer: adds min-signal-to-noise sampling plus Sharpe/walk-forward Sharpe filters, with `/optimizer/run` fields to match.
- Optimizer: adds walk-forward/tune-stress sampling controls and propagates additional combo parameters (vol floors, vol caps, stress settings) through top-combo outputs.
- Optimizer: adds sampling ranges for max-hold bars, blend weight, entry gating (incl. cost-aware-edge probability), position/vol sizing (incl. vol-floor/max-volatility/periods-per-year), Kalman market-top-n, tune objective passthrough, and bars auto/distribution controls.
- Optimizer/API: expose intrabar fill probability, bracket-stop ranges (incl. vol-mult), confidence gating, and LSTM training sampling controls to `/optimizer/run`.
- API: `/optimizer/run` now accepts the expanded optimizer sampling, tune-objective, and Kalman/volatility sizing parameters.
- API: `/optimizer/run` now merges optimizer runs into `top-combos.json` (bounded by `TRADER_OPTIMIZER_MAX_COMBOS`).
- API: allow `/optimizer/combos` to persist top-combos.json via `TRADER_OPTIMIZER_COMBOS_DIR`.
- API: persist `/bot/status` snapshots via `TRADER_BOT_STATE_DIR` so the last state survives restarts.
- API: add `TRADER_STATE_DIR` to persist ops/journal/bot state/optimizer combos/async jobs/LSTM weights under one shared directory.
- Deploy: Docker image and quick AWS deploy default `TRADER_STATE_DIR` to `/var/lib/trader/state` (now configurable via `deploy-aws-quick.sh --state-dir`).
- Deploy: when using CloudFront with a distribution ID, the quick AWS deploy script sets the UI API base to `/api` to avoid CORS.
- Deploy: quick AWS deploy now prints the CloudFront domain and warns when `/api/*` behavior is missing.
- API: rounds `/binance/keys` test order quantities to the symbol step size to avoid precision errors.
- API/UI: `/binance/keys` trade probes report `skipped` when no test order is attempted, and the UI shows `SKIP` instead of `FAIL`.
- API: `/binance/keys` preflight checks minNotional when price data is available and only fetches symbol filters when needed.
- API: add `/coinbase/keys` for Coinbase API key checks (includes passphrase).
- API: enables async job persistence by default (local `.tmp/async`); set `TRADER_API_ASYNC_DIR` to override or disable.
- Exchange data: Poloniex candles now use the `/markets/{symbol}/candles` API with `BASE_QUOTE` symbols (legacy `QUOTE_BASE` is auto-swapped).
